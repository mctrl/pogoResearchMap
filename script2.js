function initialize(){var h=new google.maps.LatLng(52.914669,-1.5400069),l=new google.maps.Geocoder,c=new google.maps.Map(document.getElementById("map-canvas"),{center:h,zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP}),d=new google.maps.FusionTablesLayer({query:{select:"location",from:"1_s6-uXU08BcUETuUwdg7DTBfvXc6CDHFeqNnqlXR"},map:c,styleId:2,templateId:2}),b=encodeURIComponent("SELECT 'Task Name', 'Reward' FROM 1mlP-EhLtoaiGR24ChXSgdYbO2h7ZapUjMADXmcPc"),g=["https://www.googleapis.com/fusiontables/v1/query"];
g.push("?sql="+b);g.push("&key=AIzaSyAm9yWCV7JPCTHCJut8whOjARd7pwROFDQ");g.push("&callback=?");var e=document.createElement("select");e.style="display:block; margin:auto; width:100%";e.id="taskList";b=document.createElement("option");b.innerHTML="All Tasks";b.value="All";e.appendChild(b);$.ajax({url:g.join(""),dataType:"jsonp",success:function(a){a=a.rows;var c=document.getElementById("ft-data"),b;for(b in a){var d=a[b][0],f=document.createElement("option");f.innerHTML=d;f.value=d;f.className="TaskName";
e.appendChild(f);c.appendChild(e)}}});var k=function(){var a=document.getElementById("address").value;l.geocode({address:a},function(a,b){if(b==google.maps.GeocoderStatus.OK){c.setCenter(a[0].geometry.location);c.setZoom(10);var e=c.getBounds().getSouthWest(),f=c.getBounds().getNorthEast();d.setOptions({query:{select:"location",from:"1_s6-uXU08BcUETuUwdg7DTBfvXc6CDHFeqNnqlXR",where:"ST_INTERSECTS(location, RECTANGLE(LATLNG"+e+", LATLNG"+f+"))"}})}else window.alert("Address could not be geocoded: "+
b)})};google.maps.event.addDomListener(document.getElementById("search"),"click",k);google.maps.event.addDomListener(window,"keypress",function(a){13==a.keyCode&&k()});google.maps.event.addDomListener(document.getElementById("reset"),"click",function(){c.setCenter(h);c.setZoom(13);d.setOptions({query:{select:"location",from:"1_s6-uXU08BcUETuUwdg7DTBfvXc6CDHFeqNnqlXR"}})});setTimeout(function(){google.maps.event.addDomListener(document.getElementById("taskList"),"change",function(){var a=document.getElementById("taskList").value;
console.log("location");console.log(a);"All"!=a?d.setOptions({query:{select:"location",from:"1_s6-uXU08BcUETuUwdg7DTBfvXc6CDHFeqNnqlXR",where:"'Research Task'='"+a+"'"}}):d.setOptions({query:{select:"location",from:"1_s6-uXU08BcUETuUwdg7DTBfvXc6CDHFeqNnqlXR"}})})},2E3)}google.maps.event.addDomListener(window,"load",initialize);